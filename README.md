PowerPress Token Authentication
=======

A WordPress plugin that works with the Blubrry [Powerpress][1] plugin to create a token authentication system for use with mobile devices/etc. on private feeds.

On devices such as iOS devices, password-protected RSS feeds are unsupported, so the problem is resolved by using a hash token to validate the user instead.

Requirements
------------
Besides the obvious, it requires [Blubrry PowerPress][2] >= 4.0.9.

Changelog
------------
**1.3**

 - Changed the login system from HTTP Authentication to the WordPress login system.
 - Fixed rewrite issue, however the token query var is not being recognized on multisite so alternative method is currently being used.

### How It Works ###
First, the feed must be set to require a password *(Premium Content)*, which this plugin intercepts the authentication part.

The plugin hooks into the `powerpress_feed_auth` hook and checks to see if the current user is logged in or not.  If they are not logged in, they will be redirected to the WordPress login screen.

Once they successfully log in, they will be re-directed back to the protected feed and a token specifically for that user & feed will be created and the user will be checked for proper permission levels for accessing the feed.  If they do not have permission, access will be denied and the token will be of no use.

The token is then used to verify it's associated with a user id and doesn't require any further authentication from the user unless the token is at some point rejected.

#### Changing The Token ####
The token is generated by using 3 values:
 1. The username of the logged in user.
 2. The feed slug.
 3. The secret salts in your wp-config.php file, as in [http://core.trac.wordpress.org/browser/tags/3.5.2/wp-includes/pluggable.php#L1305][3]

These tokens are then stored in the WordPress options value `_powerpress_auth_options` under the 'tokens' parameter.  So by changing any of the 3 above-mentioned values and then removing any keys for the user from teh 'tokens' parameter, the user must revalidate for a new token.  An easy to replace token system may be added in a future version.

  [1]: http://create.blubrry.com/resources/powerpress/
  [2]: http://wordpress.org/plugins/powerpress/
  [3]: http://core.trac.wordpress.org/browser/tags/3.5.2/wp-includes/pluggable.php#L1305
